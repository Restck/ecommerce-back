import{a as P}from"./chunk-QRBKNUAL.js";import{a as S}from"./chunk-H34DKQM7.js";import{$c as L,Ab as h,Ad as j,Ha as e,Hb as M,Ia as t,Ja as c,M as s,Oc as x,Pa as C,Qc as E,Rc as F,Sc as f,Tb as b,Ub as v,Uc as O,Vc as w,Yc as y,Za as r,_c as I,id as N,ja as l,kd as k,ld as D,nd as B,pd as R,qa as _,qd as T,va as g,vd as q,wd as G,ya as d,zd as V}from"./chunk-LULYJDTR.js";function H(o,a){o&1&&(e(0,"mat-error"),r(1,"El email es obligatorio"),t())}function J(o,a){o&1&&(e(0,"mat-error"),r(1,"Email no v\xE1lido"),t())}function K(o,a){o&1&&(e(0,"mat-error"),r(1,"La contrase\xF1a es obligatoria"),t())}var A=class o{fb=s(N);auth=s(S);cart=s(P);router=s(b);form=this.fb.group({email:["",[f.required,f.email]],password:["",f.required]});login(){if(this.form.invalid)return;let{email:a,password:m}=this.form.value;this.auth.login(a,m).subscribe({next:n=>{let{token:p,usuario:i}=n,u=i.rol,z=i.nombre,U=i._id||i.id;switch(this.auth.guardarSesion(p,u,z,U),this.cart.recargarCarritoPorUsuario(),u){case"admin":this.router.navigate(["/admin"]);break;case"vendedor":this.router.navigate(["/vendedor"]);break;case"cliente":default:this.router.navigate(["/productos"]);break}},error:()=>{alert("Credenciales inv\xE1lidas")}})}static \u0275fac=function(m){return new(m||o)};static \u0275cmp=_({type:o,selectors:[["app-login"]],decls:26,vars:5,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","placeholder","usuario@correo.com","formControlName","email"],[4,"ngIf"],["matInput","","type","password","formControlName","password"],["mat-raised-button","","color","primary",1,"full-width",3,"disabled"],[1,"help-text"],["routerLink","/registro"],["routerLink","/recuperar"]],template:function(m,n){if(m&1&&(e(0,"div",0)(1,"mat-card",1)(2,"h2"),r(3,"Iniciar sesi\xF3n"),t(),e(4,"form",2),C("ngSubmit",function(){return n.login()}),e(5,"mat-form-field",3)(6,"mat-label"),r(7,"Email"),t(),c(8,"input",4),g(9,H,2,0,"mat-error",5)(10,J,2,0,"mat-error",5),t(),e(11,"mat-form-field",3)(12,"mat-label"),r(13,"Contrase\xF1a"),t(),c(14,"input",6),g(15,K,2,0,"mat-error",5),t(),e(16,"button",7),r(17," Entrar "),t()(),e(18,"p",8),r(19," \xBFNo tienes cuenta? "),e(20,"a",9),r(21,"Reg\xEDstrate"),t(),c(22,"br"),r(23," \xBFOlvidaste tu contrase\xF1a? "),e(24,"a",10),r(25,"Recup\xE9rala"),t()()()()),m&2){let p,i,u;l(4),d("formGroup",n.form),l(5),d("ngIf",(p=n.form.get("email"))==null?null:p.hasError("required")),l(),d("ngIf",(i=n.form.get("email"))==null?null:i.hasError("email")),l(5),d("ngIf",(u=n.form.get("password"))==null?null:u.hasError("required")),l(),d("disabled",n.form.invalid)}},dependencies:[M,h,k,y,F,O,w,I,L,j,V,q,R,T,E,x,B,D,G,v],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3rem}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2rem;border-radius:12px;background-color:#fff;box-shadow:0 2px 10px #0000001a}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0d47a1;margin-bottom:1.5rem;text-align:center}.login-card[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.login-card[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:.9rem;margin-top:1rem;text-align:center}.login-card[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0d47a1;text-decoration:none}.login-card[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{A as LoginComponent};
